puts [time {set a [tip_CreateAnnotation token {{0 10}} {}]} 10000]; set a
{} token {{0 10}} {}

puts [time {set a [tip_CreateAnnotation token 0 10 {}]} 10000]; set a
{} token {{0 10}} {}

puts [time {set a [tip_CreateAnnotation token {} {}]} 10000]; set a
{} token {} {}

puts [time {set a [tip_CreateAnnotation token {} {{type CDM_STRING test}}]} 10000]; set a
{} token {} {{type {CDM_STRING {test}}}}

set a [CDM::Annotation -args token]; $a type
token

set a [CDM::Annotation -args token]; [$a spans] toString


set a [CDM::Annotation -args token [CDM::SpanSet -args 0 10]]; [$a spans] toString
{0 10}

tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]
{} token {{0 12}} {{Attr1 {CDM_STRING {StringValue}}} {Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

tip_CreateAnnotation token [list {0 12}] {}
{} token {{0 12}} {}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_GetSpans $a
{0 12}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_GetAttribute $a Attr1
Attr1 {CDM_STRING {StringValue}}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_GetAttributes $a
{Attr1 {CDM_STRING {StringValue}}} {Attr2 {CDM_STRING_SET {0 1 2 3 end}}}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_PutAttribute $a {Attr1 {CDM_STRING {StringValue}}}
{} token {{0 12}} {{Attr1 {CDM_STRING {StringValue}}} {Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_PutAttribute $a {Attr3 {CDM_STRING {StringValue}}}
{} token {{0 12}} {{Attr1 {CDM_STRING {StringValue}}} {Attr2 {CDM_STRING_SET {0 1 2 3 end}}} {Attr3 {CDM_STRING {StringValue}}}}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_PutAttribute $a {Attr1 {CDM_STRING {New StringValue}}}
{} token {{0 12}} {{Attr1 {CDM_STRING {New StringValue}}} {Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_RemoveAttribute $a Attr1
{} token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_GetType $a
token

set a [tip_CreateAnnotation token [list {0 12}] [list {Attr1 {CDM_STRING {StringValue}}} {Attr2 CDM_STRING_SET {0 1 2 3 end}}]]; tip_GetId $a


tip_GetId {123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}
123

tip_CreateAnnotationSet


tip_AddAnnotation {} {123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}
{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}

tip_AddAnnotation {{123 token {{0 12}} {{Attr2 {CDM_STRING old}}}}} {123 token {{10 12}} {{Attr2 {CDM_STRING new}}}}
{123 token {{10 12}} {{Attr2 {CDM_STRING {new}}}}}

tip_Length {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}}
2

tip_Length {}
0

tip_Nth {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}} 0
123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

tip_Nth {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}} 1
1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

catch {tip_Nth {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}} 5} e; set e
1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}

tip_MergeAnnotations {} {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}}
{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}

tip_MergeAnnotations {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}} {{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}}
{123 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}} {1234 token {{0 12}} {{Attr2 {CDM_STRING_SET {0 1 2 3 end}}}}}

tip_MergeAnnotations {{1 token {} {}} {2 token {} {}}} {{1 replaced {} {}} {3 replaced {} {}}}
{1 replaced {} {}} {2 token {} {}} {3 replaced {} {}}

tip_AddAnnotation {{5 token {} {}}} {{} token {} {}}
{5 token {} {}} {6 token {} {}}

tip_AddAnnotation {{5 token {} {}}} {3 token {} {}}
{3 token {} {}} {5 token {} {}}

set o [CDM::Annotation -args token]; set r [$o save_XML]; $o -delete; set r
<?xml version="1.0" encoding="utf-8"?><Ellogon><Annotation><id>18446744073709551615</id><type><ptr_wrapper><id>2147483649</id><data>token</data></ptr_wrapper></type><spans><min>18446744073709551615</min><max>0</max><set size="dynamic"/></spans><attributes><set size="dynamic"/></attributes></Annotation></Ellogon>

set o [CDM::AnnotationSet -args token]; set r [$o save_XML]; $o -delete; set r
<?xml version="1.0" encoding="utf-8"?><Ellogon><AnnotationSet><nextId>1</nextId></AnnotationSet></Ellogon>

set o [CDM::Annotation -args token]; set r [$o save_JSON]; $o -delete; string map {\n {}} $r
{"Annotation": {"id": 18446744073709551615,"type": {"ptr_wrapper": {"id": 2147483649,"data": "token"}},"spans": {"min": 18446744073709551615,"max": 0,"set": []},"attributes": {"set": []}}}

set o [CDM::AnnotationSet -args token]; set r [$o save_JSON]; $o -delete; string map {\n {}} $r
{"AnnotationSet": {"nextId": 1}}
